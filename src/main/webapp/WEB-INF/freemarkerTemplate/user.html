<!DOCTYPE html>
<html>
  <head>
    <title>user.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
<script type="text/javascript" src="${request.contextPath}/js/jquery-3.0.0.js" ></script>
  </head>
  
  <body>
    <table>
       <thead>
          <tr>
             <td>用户编号</td>
             <td>用户名</td>
             <td colspan="3">删改操作</td>
          </tr>
       </thead>
       <tbody>
          <#list users as user>
	          <tr>
	             <td>${user.userid}</td>
	             <td>${user.username}</td>
	             <td><a href="${request.contextPath}/user/${user.userid}">查看</a></td>
	             <td><a href="${request.contextPath}/user/${user.userid}/update">更新</a></td>
	             <td><a href="javascript:void(0);" onclick="deleteUser(${user.userid},this )">删除</a></td>
	          </tr>
          </#list>
       </tbody>
    </table>
    <br>
    <br>
    <#if (users?size>1)>
          <#assign path=request.contextPath>
          2
    <#else>
          <#assign path=request.contextPath+"/user">
          1
    </#if>
    <a href="${path}">返回上一页</a>
    <!-- <a href="javascript:history.go(-1);">返回上一页</a> -->
    <script>
       function deleteUser(userid,obj){
           $.ajax({
             url:"${request.contextPath}/user/"+userid,
             type:"delete",
             data:{"userid":userid},
             success:function(data){
                 $(obj).parent().parent().remove();
             },
             error:function(XMLHttpRequest,textStatus,errorThrown){
                console.log(XMLHttoRequest.readyState);
                console.log(textStatus);
                console.log(errorThrown);
             }
           })
       }
    </script>
  </body>
</html>
